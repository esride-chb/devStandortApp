var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};define(["require","exports","esri/popup/content/CustomContent","esri/PopupTemplate","esri/support/actions/ActionButton"],function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.actionID=e.rubrikenForStandort=e.popupTemplateCluster=e.popupTemplateRegionen=e.popupTemplateStandort=void 0,n=__importDefault(n),i=__importDefault(i),r=__importDefault(r);var s=[],a=(e.rubrikenForStandort=s,"open-standort-page"),o=(e.actionID=a,new n.default({outFields:["*"],creator:function(t){var e=document.createElement("div"),n=(e.setAttribute("id","popupLogoDiv"),t.graphic.attributes.GP&&"ja"===t.graphic.attributes.GP&&((n=document.createElement("img")).src="app/assets/icons/GP-logo-schwarz.svg",n.height=40,e.appendChild(n)),document.createElement("div"));return t.graphic.attributes.Logo?n.textContent=t.graphic.attributes.Logo:n.textContent="DummyText",e.appendChild(n),t.graphic.attributes.Unternehmensdomain&&((n=document.createElement("a")).href=t.graphic.attributes.Unternehmensdomain,n.innerText="Zum Unternehmen",n.setAttribute("id","popupLogoDivLink"),n.target="_blank",e.appendChild(n)),e}})),u=new n.default({outFields:["*"],creator:function(e){var t=document.createElement("div"),n=(t.setAttribute("id","popupAttributesDiv"),document.createElement("div")),n=(n.setAttribute("id","popupAttributesDivStandort"),n.textContent="Standort "+e.graphic.attributes.Standort,t.appendChild(n),document.createElement("div")),n=(n.setAttribute("id","popupAttributesDivAdress"),n.innerHTML=e.graphic.attributes.so_strasse+"<br>"+e.graphic.attributes.so_plz+" "+e.graphic.attributes.so_ort,t.appendChild(n),document.createElement("div")),i=(n.className="popupAttributesDivContact",document.createElement("img")),r=(i.src="app/assets/icons/icon-telefon.svg",i.width=16,i.height=16,i.className="popupAttributesContactChild",n.appendChild(i),document.createElement("div")),r=(r.className="popupAttributesContactChild",e.graphic.attributes.telefon?r.textContent=e.graphic.attributes.telefon:r.textContent="0000",n.onmouseover=function(){i.src="app/assets/icons/icon-telefon-grau.svg"},n.onmouseout=function(){i.src="app/assets/icons/icon-telefon.svg"},n.onclick=function(){window.open("tel:"+e.graphic.attributes.telefon,"_self")},n.appendChild(r),t.appendChild(n),document.createElement("div")),a=(r.className="popupAttributesDivContact",document.createElement("img")),n=(a.src="app/assets/icons/icon-email.svg",a.width=16,a.height=16,a.className="popupAttributesContactChild",r.appendChild(a),document.createElement("div")),o=(n.className="popupAttributesContactChild",e.graphic.attributes.mail?n.textContent=e.graphic.attributes.mail:n.textContent="xxx@xxx.de",r.appendChild(n),r.onmouseover=function(){a.src="app/assets/icons/icon-email-grau.svg"},r.onmouseout=function(){a.src="app/assets/icons/icon-email.svg"},r.onclick=function(){window.open("mailto:"+e.graphic.attributes.mail,"_self")},t.appendChild(r),document.createElement("div")),n=(o.setAttribute("id","popupAttributesDivRubriken"),document.createElement("div")),r=(n.textContent="Alle Inhalte zum Thema",o.appendChild(n),s.find(function(t){return t.id===e.graphic.attributes.Standort+"_"+e.graphic.attributes.Gesellschaft}));return r&&(r.rubriken.forEach(function(t){var e=document.createElement("div");e.className="popupRubrikenButton",e.textContent=t.name,e.onclick=function(){window.open(t.url,"_blank")},o.appendChild(e)}),t.appendChild(o)),t}}),o=new i.default({content:[o,u],overwriteActions:!0,actions:[new r.default({title:"Zum Standort",id:a,image:"app/assets/icons/icon-externer-link-weiss.svg"})]}),u=(e.popupTemplateStandort=o,new n.default({outFields:["gebiet"],creator:function(t){var e=document.createElement("div");return e.setAttribute("id","regionenPopup"),e.textContent=t.graphic.attributes.gebiet,e}})),r=new i.default({content:[u],overwriteActions:!0,actions:[]}),a=(e.popupTemplateRegionen=r,new n.default({outFields:["*"],creator:function(t){var e=document.createElement("div");return e.setAttribute("id","clusterPopup"),e.innerHTML="Dieser Cluster sind "+t.graphic.attributes.cluster_count+" GP-Standorte    ",e}})),o=new i.default({content:[a,{type:"expression",expressionInfo:{expression:"\n            Expects($aggregatedFeatures, \"Hauptsäule\")\n            var statsFS = GroupBy($aggregatedFeatures,\n              [\n                { name: 'Type', expression: 'Hauptsäule'},\n              ],\n              [\n                { name: 'num_features', expression: '1', statistic: 'COUNT' }\n              ]\n            );\n            var ordered = Top(OrderBy(statsFs, 'num_features DESC'), 5);\n           \n            var list = \"\";\n            for (var group in ordered){\n              list += `${Text(group.num_features, \"#,###\")} Standorte aus ${group.Type}<br>`\n            }\n\n            return {\n              type: \"text\",\n              text: list\n            }\n          ",title:"Standorte nach Hauptsaeule"}}],overwriteActions:!0,actions:[]});e.popupTemplateCluster=o});